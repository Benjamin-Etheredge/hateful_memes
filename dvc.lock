schema: '2.0'
stages:
  test_visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_visual_bert_image_metrics --project test &&\
      \ echo \"PASSED\" > logs/test_visual_bert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/visual_bert.py
      md5: 39e1ea5738c36d4efccbba2c751df06a
      size: 3990
    outs:
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_simple_image:
    cmd: "python -m hateful_memes.models.simple_image --log_dir logs/test_simple_image_metrics\
      \ --project test --fast_dev_run True && echo \"PASSED\" > logs/test_simple_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_image.py
      md5: 72a65b7ac6fe0c3c91a3976b2f155d0e
      size: 4548
    outs:
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_image:
    cmd: "python -m hateful_memes.models.simple_image --batch_size 128 --lr 1e-05\
      \ --epochs 1000 --dense_dim 512 --dropout_rate 0.5 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_image --batch_norm true --project iso_simple_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_image.py
      md5: 72a65b7ac6fe0c3c91a3976b2f155d0e
      size: 4548
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_image
      md5: c08cb55f7d5655e7f46aa31085e4b685.dir
      size: 88193081
      nfiles: 1
  test_simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --fast_dev_run True --log_dir\
      \ logs/test_simple_mlp_image_metrics --project test && echo \"PASSED\" > logs/test_simple_mlp_image.log\
      \ \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 7b222559694ae8b81a2d3ba8f861dcbc
      size: 2727
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --batch_size 128 --lr 1e-05\
      \ --epochs 1000 --dense_dim 128 --dropout_rate 0.2 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image --project iso_simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 7b222559694ae8b81a2d3ba8f861dcbc
      size: 2727
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_mlp_image
      md5: c16b3363d17dbd03ee5b419a3d3d422d.dir
      size: 231628339
      nfiles: 1
  baseline:
    cmd: python -m hateful_memes.models.baseline_algorithm
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: 5b5bbee254ba72de45450417e2b0efc5
      size: 2214
  visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 64 --lr 1e-05 --epochs\
      \ 1000 --dense_dim 1024 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/visual_bert\
      \ --freeze true --project iso_visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/visual_bert.py
      md5: 39e1ea5738c36d4efccbba2c751df06a
      size: 3990
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert
      md5: d863c9dcd4d5080feba16b59daab9e9a.dir
      size: 1629615853
      nfiles: 1
  simple_text:
    cmd: "python -m hateful_memes.models.simple_text --batch_size 128 --lr 1e-05 --num_layers\
      \ 8 --embed_dim 512 --dense_dim 512 --max_length 96 --tokenizer_name bert-base-uncased\
      \ --grad_clip 1.0 --dropout_rate 0.1 --epochs 1000 --model_dir data/06_models/simple_text\
      \ --project iso_simple_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_text.py
      md5: 5c102d4844d221d055da69efc2c8ca68
      size: 3869
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_text
      md5: 4efd2c9948c74036495ee69b7501417e.dir
      size: 392434031
      nfiles: 1
  test_simple_text:
    cmd: "python -m hateful_memes.models.simple_text --fast_dev_run True && echo \"\
      PASSED\" > logs/test_simple_text.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_text.py
      md5: 5c102d4844d221d055da69efc2c8ca68
      size: 3869
    outs:
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_ckpt data/06_models/simple_image\
      \ --simple_text_ckpt data/06_models/simple_text --fast_dev_run True && echo\
      \ \"PASSED\" > logs/test_super_model.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/simple_image
      md5: c08cb55f7d5655e7f46aa31085e4b685.dir
      size: 88193081
      nfiles: 1
    - path: data/06_models/simple_text
      md5: 4efd2c9948c74036495ee69b7501417e.dir
      size: 392434031
      nfiles: 1
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/super_model.py
      md5: 496111fd9b69009e9376017029631653
      size: 7220
    outs:
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_ckpt data/06_models/simple_image\
      \ --simple_mlp_image_ckpt data/06_models/simple_mlp_image --simple_text_ckpt\
      \ data/06_models/simple_text --visual_bert_ckpt data/06_models/visual_bert --vit_ckpt\
      \ data/06_models/vit --beit_ckpt data/06_models/beit --electra_ckpt data/06_models/electra\
      \ --distilbert_ckpt data/06_models/distilbert --batch_size 64 --lr 1e-05 --num_dense_layers\
      \ 2 --dense_dim 512 --dropout_rate 0.5 --grad_clip 1.0 --epochs 1000 --model_dir\
      \ data/06_models/super_model --project iso_super_model\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/beit
      md5: cb8c7da19c018c5fde6562270e55d260.dir
      size: 415443203
      nfiles: 1
    - path: data/06_models/distilbert
      md5: a187f0401af1e8283ad85d61ef0c976d.dir
      size: 268653137
      nfiles: 1
    - path: data/06_models/electra
      md5: 651b2818dc9d9b2c12787e2e420c96d1.dir
      size: 55607497
      nfiles: 1
    - path: data/06_models/simple_image
      md5: 12d1851746cbcfdf6b78f76e0ff338ed.dir
      size: 88193017
      nfiles: 1
    - path: data/06_models/simple_mlp_image
      md5: 578b453424b0de2bdb54ea13881cda50.dir
      size: 231628339
      nfiles: 1
    - path: data/06_models/simple_text
      md5: 52e3097139ae1d0d96f7da511ea8dad4.dir
      size: 392434031
      nfiles: 1
    - path: data/06_models/visual_bert
      md5: c5ec9e1db0b96c8be591b733208041ae.dir
      size: 543407621
      nfiles: 1
    - path: data/06_models/vit
      md5: 8f45ec11b951a6e6e42e6aa7a8f699e5.dir
      size: 347742345
      nfiles: 1
    - path: hateful_memes/data/hateful_memes.py
      md5: 18b537e68da0f99fcb77283a4da24aaa
      size: 9284
    - path: hateful_memes/models/base.py
      md5: f321d176e34eabb39a28ddb7938e162f
      size: 7478
    - path: hateful_memes/models/super_model.py
      md5: 496111fd9b69009e9376017029631653
      size: 7220
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/super_model
      md5: 72098b393719278beaae315d85d1e4d4.dir
      size: 1880884820
      nfiles: 1
  test_vit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_vit_image_metrics --project test && echo \"\
      PASSED\" > logs/test_vit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/baseIT.py
      md5: c3cd8dfd9b5cc782d86b2d167ea21074
      size: 5283
    outs:
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  vit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 128\
      \ --lr 1e-05 --epochs 1000 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0\
      \ --model_dir data/06_models/vit --project iso_vit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/baseIT.py
      md5: c3cd8dfd9b5cc782d86b2d167ea21074
      size: 5283
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/vit
      md5: 79201a79fa20345f6c338420017b4714.dir
      size: 1034092869
      nfiles: 1
  test_beit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 4  --fast_dev_run\
      \ True && echo \"PASSED\" > logs/test_beit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/baseIT.py
      md5: c3cd8dfd9b5cc782d86b2d167ea21074
      size: 5283
    outs:
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  beit:
    cmd: "python -m hateful_memes.models.baseIT --model_name beit --batch_size 128\
      \ --lr 1e-05 --epochs 1000 --dense_dim 128 --dropout_rate 0.5 --grad_clip 1.0\
      \ --model_dir data/06_models/beit --project iso_beit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 18b537e68da0f99fcb77283a4da24aaa
      size: 9284
    - path: hateful_memes/models/base.py
      md5: f321d176e34eabb39a28ddb7938e162f
      size: 7478
    - path: hateful_memes/models/baseIT.py
      md5: 022e3fa942fc56044a1349e574ea10ec
      size: 5516
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/beit
      md5: cb8c7da19c018c5fde6562270e55d260.dir
      size: 415443203
      nfiles: 1
  test_electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name google/electra-small-discriminator && echo \"PASSED\" >\
      \ logs/test_electra.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/auto_text_model.py
      md5: 00fa38c077c2f5b524410669234fe158
      size: 3417
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    outs:
    - path: logs/test_electra.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 128 --lr 1e-05\
      \ --epochs 1000 --max_length 96 --dense_dim 1024 --dropout_rate 0.1 --grad_clip\
      \ 1.0 --model_name google/electra-small-discriminator --model_dir data/06_models/electra\
      \ --project iso_electra\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/auto_text_model.py
      md5: 00fa38c077c2f5b524410669234fe158
      size: 3417
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: logs/test_electra.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/electra
      md5: aa2f74b4333ba032c8fb86929418c543.dir
      size: 165230137
      nfiles: 1
  test_distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name distilbert-base-uncased-finetuned-sst-2-english && echo\
      \ \"PASSED\" > logs/test_distilbert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/auto_text_model.py
      md5: 00fa38c077c2f5b524410669234fe158
      size: 3417
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    outs:
    - path: logs/test_distilbert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 128 --lr 1e-05\
      \ --epochs 1000 --max_length 96 --dense_dim 1024 --dropout_rate 0.1 --grad_clip\
      \ 1.0 --model_name distilbert-base-uncased-finetuned-sst-2-english --model_dir\
      \ data/06_models/distilbert --project iso_distilbert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/auto_text_model.py
      md5: 00fa38c077c2f5b524410669234fe158
      size: 3417
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: logs/test_distilbert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/distilbert
      md5: ff532316b53ab8570e4d252d9c503a9c.dir
      size: 805945805
      nfiles: 1
  test_visual_bert_with_od:
    cmd: "python -m hateful_memes.models.visual_bert_with_od --batch_size 4  --fast_dev_run\
      \ True && echo \"PASSED\" > logs/test_visual_bert_with_od.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert_with_od.py
      md5: c83d54072428283235a16d6f457f4a81
      size: 5549
    outs:
    - path: logs/test_visual_bert_with_od.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  visual_bert_with_od:
    cmd: "python -m hateful_memes.models.visual_bert_with_od --lr 1e-05 --epochs 1000\
      \ --max_length 64 --dense_dim 256 --dropout_rate 0.0 --num_queries 70 --batch_size\
      \ 64 --grad_clip 1.0 --model_dir data/06_models/visual_bert_with_od --project\
      \ iso_visual_bert_with_od --freeze true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 08d7e5c7c23de552b689c90440489932
      size: 8432
    - path: hateful_memes/models/base.py
      md5: 22080bb08b4c0662e1d83cb50348ea2b
      size: 7377
    - path: hateful_memes/models/visual_bert_with_od.py
      md5: 982d08e97bc425bace3fa8f9f175381d
      size: 6015
    - path: logs/test_visual_bert_with_od.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert_with_od
      md5: 2c79f6435257a367b67874aeb74f0ad6.dir
      size: 613964877
      nfiles: 1
  hateful_memes_to_snli_ve:
    cmd: python hateful_memes/data/hateful_memes_snli_ve.py
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes_snli_ve.py
      md5: b99996b91149bb58162e3e49ca1d8843
      size: 4483
    outs:
    - path: data/02_intermediate/hateful_memes_train_snli_ve.tsv
      md5: a4aa96507523cfab3af40019c2020f8a
      size: 4077674756
    - path: data/02_intermediate/hateful_memes_valid_snli_ve.tsv
      md5: e53d1c118761446cd00d926469da82f5
      size: 252275396
  test_hateful_ofa:
    cmd: "python -m hateful_memes.models.hateful_ofa data/02_intermediate/hateful_memes_train_snli_ve.tsv,data/02_intermediate/hateful_memes_valid_snli_ve.tsv\
      \ --selected-cols 0,2,3,4,5 --restore-file data/06_models/ofa/snli_ve_large_best.pt\
      \ --save-dir data/06_models/hateful_ofa --log-dir logs/hateful_ofa --task snli_ve\
      \  --arch ofa_large --batch-size 1 --encoder-normalize-before --decoder-normalize-before\
      \ --share-decoder-input-output-embed --share-all-embeddings --layernorm-embedding\
      \  --patch-layernorm-embedding --code-layernorm-embedding  --resnet-drop-path-rate\
      \ 0.0  --encoder-drop-path-rate 0.2 --decoder-drop-path-rate 0.2 --dropout 0.1\
      \  --attention-dropout 0.0 --weight-decay 0.01  --optimizer adam  --adam-betas\
      \ 0.9,0.999 --adam-eps 1e-08 --clip-norm 1.0 --lr 2e-05  --max-epoch 6  --fixed-validation-seed\
      \ 7  --max-src-length 80 --max-tgt-length 20 --find-unused-parameters  --add-type-embedding\
      \  --scale-attn  --scale-fc  --scale-heads  --disable-entangle  --num-bins 1000\
      \ --patch-image-size 480 --prompt-type prev_output  --add-caption  --fp16  --fp16-scale-window\
      \ 512 --num-workers 0 --ema-alpha 0.1 --fast-dev-run 1 --monitor-metric val/loss\
      \ --monitor-metric-mode min --stopping-patience 10 && echo \"PASSED\" > logs/test_hateful_ofa.log\n"
    deps:
    - path: data/02_intermediate/hateful_memes_train_snli_ve.tsv
      md5: a4aa96507523cfab3af40019c2020f8a
      size: 4077674756
    - path: data/02_intermediate/hateful_memes_valid_snli_ve.tsv
      md5: e53d1c118761446cd00d926469da82f5
      size: 252275396
    - path: data/06_models/ofa/snli_ve_large_best.pt
      md5: 8368190a42477d2974fa0affb6279f00
      size: 6230613509
    - path: hateful_memes/models/hateful_ofa.py
      md5: f53103e1d54c5cb6837d03949f184b0d
      size: 16504
    outs:
    - path: logs/test_hateful_ofa.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  train_hateful_ofa:
    cmd: "python -m hateful_memes.models.hateful_ofa data/02_intermediate/hateful_memes_train_snli_ve.tsv,data/02_intermediate/hateful_memes_valid_snli_ve.tsv\
      \ --selected-cols 0,2,3,4,5 --restore-file data/06_models/ofa/snli_ve_large_best.pt\
      \ --save-dir data/06_models/hateful_ofa --log-dir logs/hateful_ofa --task snli_ve\
      \  --arch ofa_large --batch-size 4 --encoder-normalize-before --decoder-normalize-before\
      \ --share-decoder-input-output-embed --share-all-embeddings --layernorm-embedding\
      \  --patch-layernorm-embedding --code-layernorm-embedding  --resnet-drop-path-rate\
      \ 0.0  --encoder-drop-path-rate 0.2 --decoder-drop-path-rate 0.2 --dropout 0.1\
      \  --attention-dropout 0.0 --weight-decay 0.01  --optimizer adam  --adam-betas\
      \ 0.9,0.999 --adam-eps 1e-08 --clip-norm 1.0 --lr 2e-05  --max-epoch 6  --fixed-validation-seed\
      \ 7  --max-src-length 80 --max-tgt-length 20 --find-unused-parameters  --add-type-embedding\
      \  --scale-attn  --scale-fc  --scale-heads  --disable-entangle  --num-bins 1000\
      \ --patch-image-size 480 --prompt-type prev_output  --add-caption  --fp16  --fp16-scale-window\
      \ 512 --num-workers 8 --ema-alpha 0.11 --fast-dev-run 0 --monitor-metric val/loss\
      \ --monitor-metric-mode min --stopping-patience 10\n"
    deps:
    - path: data/02_intermediate/hateful_memes_train_snli_ve.tsv
      md5: a4aa96507523cfab3af40019c2020f8a
      size: 4077674756
    - path: data/02_intermediate/hateful_memes_valid_snli_ve.tsv
      md5: e53d1c118761446cd00d926469da82f5
      size: 252275396
    - path: data/06_models/ofa/snli_ve_large_best.pt
      md5: 8368190a42477d2974fa0affb6279f00
      size: 6230613509
    - path: hateful_memes/models/hateful_ofa.py
      md5: 6965dbf385ca878f170249ba4e446cf8
      size: 14416
    outs:
    - path: data/06_models/hateful_ofa
      md5: 6dd58cb3ed6d31dca6c7d93ba3d3d35f.dir
      size: 5719131362
      nfiles: 1
  test_simple_image_text:
    cmd: "python -m hateful_memes.models.simple_image_text --fast_dev_run True &&\
      \ echo \"PASSED\" > logs/test_simple_image_text.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_image_text.py
      md5: 64d3f7e90b5ffff394b751ade6565441
      size: 6159
    outs:
    - path: logs/test_simple_image_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_image_text:
    cmd: "python -m hateful_memes.models.simple_image_text --batch_size 128 --lr 1e-05\
      \ --num_layers 8 --embed_dim 256 --dense_dim 512 --max_length 96 --tokenizer_name\
      \ bert-base-uncased --grad_clip 1.0 --dropout_rate 0.2 --epochs 1000 --model_dir\
      \ data/06_models/simple_image_text --project iso_simple_image_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 330bdff840b14cb945de20b3ea0c21d0
      size: 9680
    - path: hateful_memes/models/base.py
      md5: fa4ff1a3360561e3bd25d16b5bdc9d17
      size: 7952
    - path: hateful_memes/models/simple_text.py
      md5: 5c102d4844d221d055da69efc2c8ca68
      size: 3869
    - path: logs/test_simple_image_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_image_text
      md5: 134e33d3899d6717f6239a7058572971.dir
      size: 386805537
      nfiles: 1
