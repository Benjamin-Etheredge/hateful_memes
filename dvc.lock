schema: '2.0'
stages:
  test_visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_visual_bert_image_metrics --project test &&\
      \ echo \"PASSED\" > logs/test_visual_bert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/visual_bert.py
      md5: a337cd626b83e27511645458f462269c
      size: 5991
    outs:
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_simple_image:
    cmd: "python -m hateful_memes.models.simple_image --log_dir logs/test_simple_image_metrics\
      \ --project test --fast_dev_run True && echo \"PASSED\" > logs/test_simple_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/simple_image.py
      md5: 705d60adb65b24d4367d2d637757c14e
      size: 4000
    outs:
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_image:
    cmd: "python -m hateful_memes.models.simple_image --batch_size 32 --lr 0.0001\
      \ --epochs 100 --dense_dim 256 --dropout_rate 0.1 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_image --batch_norm true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/simple_image.py
      md5: 705d60adb65b24d4367d2d637757c14e
      size: 4000
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_image
      md5: e16a77fdf40e45fe3059368ca0ffd635.dir
      size: 25186127
      nfiles: 1
      
  test_simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --fast_dev_run True --log_dir\
      \ logs/test_simple_mlp_image_metrics --project test && echo \"PASSED\" > logs/test_simple_mlp_image.log\
      \ \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 0c1068a480b66b2a9a2e43e1ce6f2d34
      size: 2714
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --batch_size 32 --lr 1e-05\
      \ --epochs 100 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 0c1068a480b66b2a9a2e43e1ce6f2d34
      size: 2714
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_mlp_image
      md5: fe7684db1c2bd8762294a6fc2c85e027.dir
      size: 231635489
      nfiles: 1
  baseline:
    cmd: python -m hateful_memes.models.baseline_algorithm
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: 5b5bbee254ba72de45450417e2b0efc5
      size: 2214
  visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 16 --lr 1e-05 --epochs\
      \ 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 0.5 --model_dir data/06_models/visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/visual_bert.py
      md5: a337cd626b83e27511645458f462269c
      size: 5991
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert
      md5: 5da428a7dad902030b20eb3bb18ef48e.dir
      size: 542618641
      nfiles: 1
  simple_text:
    cmd: "python -m hateful_memes.models.simple_text --batch_size 32 --lr 1e-05 --num_layers\
      \ 2 --embed_dim 256 --dense_dim 128 --max_length 512 --tokenizer_name bert-base-uncased\
      \ --grad_clip 1.0 --dropout_rate 0.1 --epochs 100 --model_dir data/06_models/simple_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/simple_text.py
      md5: 0d07eb95d9c0a8095b185768138830b5
      size: 3915
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_text
      md5: b10ca59a96ab758d876701bcebdc47e1.dir
      size: 97934527
      nfiles: 1
  test_simple_text:
    cmd: "python -m hateful_memes.models.simple_text --fast_dev_run True && echo \"\
      PASSED\" > logs/test_simple_text.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/simple_text.py
      md5: 0d07eb95d9c0a8095b185768138830b5
      size: 3915
    outs:
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_chkpt data/06_models/simple_image\
      \ --simple_text_chkpt data/06_models/simple_text --fast_dev_run True && echo\
      \ \"PASSED\" > logs/test_super_model.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/simple_image
      md5: e16a77fdf40e45fe3059368ca0ffd635.dir
      size: 25186127
      nfiles: 1
    - path: data/06_models/simple_text
      md5: b10ca59a96ab758d876701bcebdc47e1.dir
      size: 97934527
      nfiles: 1
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/super_model.py
      md5: e97b43c0b6f9a0da894666e46981ae47
      size: 5167
    outs:
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_chkpt data/06_models/simple_image\
      \ --simple_mlp_image_chkpt data/06_models/simple_mlp_image --simple_text_chkpt\
      \ data/06_models/simple_text --visual_bert_chkpt data/06_models/visual_bert\
      \ --batch_size 16 --lr 1e-05 --num_dense_layers 2 --dense_dim 256 --dropout_rate\
      \ 0.1 --epochs 100 --model_dir data/06_models/super_model\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/simple_image
      md5: e16a77fdf40e45fe3059368ca0ffd635.dir
      size: 25186127
      nfiles: 1
    - path: data/06_models/simple_mlp_image
      md5: fe7684db1c2bd8762294a6fc2c85e027.dir
      size: 231635489
      nfiles: 1
    - path: data/06_models/simple_text
      md5: b10ca59a96ab758d876701bcebdc47e1.dir
      size: 97934527
      nfiles: 1
    - path: data/06_models/visual_bert
      md5: 5da428a7dad902030b20eb3bb18ef48e.dir
      size: 542618641
      nfiles: 1
    - path: hateful_memes/models/base.py
      md5: cd09fcc9f305ddadd6d5067fee3c86d7
      size: 6292
    - path: hateful_memes/models/super_model.py
      md5: e97b43c0b6f9a0da894666e46981ae47
      size: 5167
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/super_model
      md5: 0df555ca5acc1339023f4da410e3013a.dir
      size: 663252577
      nfiles: 1
  test_vit:
    cmd: "python -m hateful_memes.models.vit --batch_size 4  --fast_dev_run True --log_dir\
      \ logs/test_simple_vit_image_metrics --project test && echo \"PASSED\" > logs/test_vit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/vit.py
      md5: b7f7ffc8655a57ca8154d60052f9c775
      size: 5191
    outs:
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  vit:
    cmd: "python -m hateful_memes.models.vit --batch_size 64 --lr 1e-05 --epochs 50\
      \ --max_length 512 --dense_dim 128 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_dir data/06_models/vit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/vit.py
      md5: b7f7ffc8655a57ca8154d60052f9c775
      size: 5191
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/vit
      md5: 0d476a7e9adbde5d80314e2f75288d47.dir
      size: 1265447801
      nfiles: 1
  test_beit:
    cmd: "python -m hateful_memes.models.beit --batch_size 4  --fast_dev_run True\
      \ --log_dir logs/test_simple_beit_image_metrics --project test && echo \"PASSED\"\
      \ > logs/test_beit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/beit.py
      md5: 94ca2de1611ce6df25ef539f581d2e08
      size: 5212
    outs:
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  beit:
    cmd: "python -m hateful_memes.models.beit --batch_size 64 --lr 1e-05 --epochs\
      \ 50 --max_length 512 --dense_dim 128 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_dir data/06_models/beit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/beit.py
      md5: 94ca2de1611ce6df25ef539f581d2e08
      size: 5212
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/beit
      md5: eb3fcbbd3cdd604b64a2fe848b3bc023.dir
      size: 1332868759
      nfiles: 1
  test_electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name google/electra-small-discriminator --model_name_simple Electra\
      \ | tee logs/test_electra.log 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/auto_text_model.py
      md5: b338f02d1b1fe381a5bf100780f8c4ac
      size: 4223
    outs:
    - path: logs/test_electra.log
      md5: 6c16b487e18970ac718a77419bb900c2
      size: 3594
  electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 16 --lr 1e-05\
      \ --epochs 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_name google/electra-small-discriminator --model_name_simple Electra\
      \ --model_dir data/06_models/electra\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/auto_text_model.py
      md5: b338f02d1b1fe381a5bf100780f8c4ac
      size: 4223
    - path: logs/test_electra.log
      md5: 6c16b487e18970ac718a77419bb900c2
      size: 3594
    outs:
    - path: data/06_models/electra
      md5: f6968b097b3677adb57a99e3d9e9f625.dir
      size: 564665657
      nfiles: 1
  test_distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name distilbert-base-uncased-finetuned-sst-2-english --model_name_simple\
      \ Distilbert | tee logs/test_distilbert.log 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/auto_text_model.py
      md5: b338f02d1b1fe381a5bf100780f8c4ac
      size: 4223
    outs:
    - path: logs/test_distilbert.log
      md5: 00f21c47f6c0a6d7872a92ae1b771d49
      size: 3594
  distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 16 --lr 1e-05\
      \ --epochs 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_name distilbert-base-uncased-finetuned-sst-2-english --model_name_simple\
      \ Distilbert --model_dir data/06_models/distilbert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/auto_text_model.py
      md5: b338f02d1b1fe381a5bf100780f8c4ac
      size: 4223
    - path: logs/test_distilbert.log
      md5: 00f21c47f6c0a6d7872a92ae1b771d49
      size: 3594
    outs:
    - path: data/06_models/distilbert
      md5: 7ed76c52baa54fc10a57cbefd716a9a9.dir
      size: 2004425357
      nfiles: 1
