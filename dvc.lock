schema: '2.0'
stages:
  visual_bert:
    cmd: "python hateful_memes/models/visual_bert.py --batch_size 16 --lr 1e-05 --epochs\
      \ 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_dir data/06_models/visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert.py
      md5: ceb3604e879b92f43b128baea1f0a245
      size: 8500
    - path: logs/test_visual_bert.log
      md5: 8d04ba0d34db608b62daf92721723206
      size: 834
    outs:
    - path: data/06_models/visual_bert
      md5: 4a1f005e03860ecda4026452ec021d6c.dir
      size: 1623290983
      nfiles: 1
    - path: data/08_reporting/visual_bert
      md5: 889d6cf034536eb1cb77b1fb31af0e89.dir
      size: 32599
      nfiles: 6
  simple_image_model:
    cmd: "python src/models/simple_image_model.py --batch_size 64 --lr 1e-05 --epochs\
      \ 50 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/simple_image_model.py
      md5: 6ea1461e197fdd0a7de6b55e40032e05
      size: 3551
    params:
      params.yaml:
        simple_image_model:
          batch_size: 64
          source: src/models/simple_image_model.py
          lr: 1e-05
          epochs: 50
          dense_dim: 128
          dropout_rate: 0.1
          gradient_clip_value: 1.0
    outs:
    - path: data/06_models/simple_image
      md5: f20dbc0bc7255cdc1c73b92a5d839b0b.dir
      size: 66949174
      nfiles: 1
    - path: data/08_reporting/simple_image
      md5: 05a171a503e9a1e161dc1118e1af3dcb.dir
      size: 108467
      nfiles: 9
  baseline_model:
    cmd: python src/models/baseline_algorithm.py
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/baseline_algorithm.py
      md5: a1d8733acc890fb558376326040a33d2
      size: 2043
    outs:
    - path: data/08_reporting/baseline
      md5: 7f01c28a6be9da2e83d73ef80da106ab.dir
      size: 148
      nfiles: 3
  simple_mlp_image:
    cmd: "python hateful_memes/models/simple_mlp_image.py --batch_size 128 --lr 1e-05\
      \ --epochs 50 --dense_dim 64 --dropout_rate 0.1 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image --log_dir data/08_reporting/simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 71ab3754f669033a501e13770de3148c
      size: 3398
    - path: logs/test_simple_mlp_image.log
      md5: 0622ccf1182901140a4676262c18230b
      size: 2559
    outs:
    - path: data/06_models/simple_mlp_image
      md5: e11bded287f56b7b55fb18941bab200a.dir
      size: 115665641
      nfiles: 1
    - path: data/08_reporting/simple_mlp_image.json
      md5: a9a9ace8ea3167ad6c23060655bcfcee
      size: 215
    - path: data/08_reporting/simple_mlp_image/scalars/epoch.tsv
      md5: b732e70a5ba89f7e2be03ed9e197c2ca
      size: 581
    - path: data/08_reporting/simple_mlp_image/scalars/train/acc.tsv
      md5: fc9d58b6fe5eed7e156ba3b1e53d543e
      size: 539
    - path: data/08_reporting/simple_mlp_image/scalars/train/loss.tsv
      md5: 0005567a3571ef49bb354f8eb7af19a0
      size: 538
    - path: data/08_reporting/simple_mlp_image/scalars/val/acc.tsv
      md5: 755a1232cd4daa11d1b0f0010de9fc87
      size: 537
    - path: data/08_reporting/simple_mlp_image/scalars/val/loss.tsv
      md5: e35f97dd918a581ed5b9771e8e010eb5
      size: 536
  simple_image:
    cmd: "python hateful_memes/models/simple_image.py --batch_size 64 --lr 1e-05 --epochs\
      \ 50 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_image\
      \ --batch_norm true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_image.py
      md5: c8d147e52dc084862268ce028ad15eee
      size: 4137
    - path: logs/test_simple_image.log
      md5: 9c422ddbbfc2c21467fffb4ee37d419f
      size: 2649
    outs:
    - path: data/06_models/simple_image
      md5: a52589c2b7cddaec4461e1f1c46f1b8d.dir
      size: 66951667
      nfiles: 1
    - path: data/08_reporting/simple_image
      md5: b4cbba7ba6ec56366daf2cd28241c4f2.dir
      size: 30573
      nfiles: 6
  test_simple_mlp_image:
    cmd: "python hateful_memes/models/simple_mlp_image.py  --fast_dev_run True |&\
      \ tee logs/test_simple_mlp_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 71ab3754f669033a501e13770de3148c
      size: 3398
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 0622ccf1182901140a4676262c18230b
      size: 2559
  test_visual_bert:
    cmd: "python hateful_memes/models/visual_bert.py --batch_size 4  --fast_dev_run\
      \ True |& tee logs/test_visual_bert.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert.py
      md5: ceb3604e879b92f43b128baea1f0a245
      size: 8500
    outs:
    - path: logs/test_visual_bert.log
      md5: 8d04ba0d34db608b62daf92721723206
      size: 834
  test_simple_image:
    cmd: "python hateful_memes/models/simple_image.py  --fast_dev_run True |& tee\
      \ logs/test_simple_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_image.py
      md5: c8d147e52dc084862268ce028ad15eee
      size: 4137
    outs:
    - path: logs/test_simple_image.log
      md5: 9c422ddbbfc2c21467fffb4ee37d419f
      size: 2649
  baseline:
    cmd: python hateful_memes/models/baseline_algorithm.py
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: eece2d632e2764f60357eaa5438e3fd5
      size: 2093
    outs:
    - path: data/08_reporting/baseline
      md5: f850675a0a83bae7240737bb050ab5f0.dir
      size: 148
      nfiles: 3
