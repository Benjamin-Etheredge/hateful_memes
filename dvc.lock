schema: '2.0'
stages:
  test_visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_visual_bert_image_metrics --project test &&\
      \ echo \"PASSED\" > logs/test_visual_bert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/visual_bert.py
      md5: eaea151e745d421c1d2013119874edf4
      size: 4664
    outs:
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_simple_image:
    cmd: "python -m hateful_memes.models.simple_image --log_dir logs/test_simple_image_metrics\
      \ --project test --fast_dev_run True && echo \"PASSED\" > logs/test_simple_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/simple_image.py
      md5: 863819f51eff4e752a33e34a4da82884
      size: 4920
    outs:
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_image:
    cmd: "python -m hateful_memes.models.simple_image --batch_size 0 --lr 1e-05 --epochs\
      \ 100 --dense_dim 512 --dropout_rate 0.5 --grad_clip 1.0 --model_dir data/06_models/simple_image\
      \ --batch_norm true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/simple_image.py
      md5: 863819f51eff4e752a33e34a4da82884
      size: 4920
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_image
      md5: b029408863a2192bb0322b533ff6f1b4.dir
      size: 88195385
      nfiles: 1
  test_simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --fast_dev_run True --log_dir\
      \ logs/test_simple_mlp_image_metrics --project test && echo \"PASSED\" > logs/test_simple_mlp_image.log\
      \ \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 2040d61ebb7562d768e0f60b25ec326a
      size: 2725
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --batch_size 0 --lr 1e-05\
      \ --epochs 100 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 2040d61ebb7562d768e0f60b25ec326a
      size: 2725
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_mlp_image
      md5: 260318c3983fa43d225987f9160262a5.dir
      size: 231630579
      nfiles: 1
  baseline:
    cmd: python -m hateful_memes.models.baseline_algorithm
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: 5b5bbee254ba72de45450417e2b0efc5
      size: 2214
  visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 0 --lr 1e-05 --epochs\
      \ 1000 --max_length 64 --dense_dim 256 --dropout_rate 0.0 --grad_clip 1.0 --model_dir\
      \ data/06_models/visual_bert --freeze false\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/visual_bert.py
      md5: eaea151e745d421c1d2013119874edf4
      size: 4664
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert
      md5: ed32a3911a3bbe79b3a03a81255e8195.dir
      size: 1623293991
      nfiles: 1
  simple_text:
    cmd: "python -m hateful_memes.models.simple_text --batch_size 0 --lr 1e-05 --num_layers\
      \ 2 --embed_dim 256 --dense_dim 128 --max_length 64 --tokenizer_name bert-base-uncased\
      \ --grad_clip 1.0 --dropout_rate 0.1 --epochs 100 --model_dir data/06_models/simple_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/simple_text.py
      md5: c6ae787ee51bde9d42058fff700b3470
      size: 3914
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_text
      md5: 4424e883ce41f5291ce36f76d2b8b106.dir
      size: 97934527
      nfiles: 1
  test_simple_text:
    cmd: "python -m hateful_memes.models.simple_text --fast_dev_run True && echo \"\
      PASSED\" > logs/test_simple_text.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/simple_text.py
      md5: c6ae787ee51bde9d42058fff700b3470
      size: 3914
    outs:
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_ckpt data/06_models/simple_image\
      \ --simple_text_ckpt data/06_models/simple_text --fast_dev_run True && echo\
      \ \"PASSED\" > logs/test_super_model.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/simple_image
      md5: b029408863a2192bb0322b533ff6f1b4.dir
      size: 88195385
      nfiles: 1
    - path: data/06_models/simple_text
      md5: 4424e883ce41f5291ce36f76d2b8b106.dir
      size: 97934527
      nfiles: 1
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/super_model.py
      md5: 287efc820a7a9cfc2a90c590ca6e914b
      size: 6427
    outs:
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_chkpt data/06_models/simple_image\
      \ --simple_mlp_image_chkpt data/06_models/simple_mlp_image --simple_text_chkpt\
      \ data/06_models/simple_text --visual_bert_chkpt data/06_models/visual_bert\
      \ --vit_chkpt data/06_models/vit --beit_chkpt data/06_models/beit --batch_size\
      \ 0 --lr 1e-05 --num_dense_layers 2 --dense_dim 256 --dropout_rate 0.1 --epochs\
      \ 1000 --model_dir data/06_models/super_model\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/beit
      md5: f230d766eb1b80850e3cec7a94f575a6.dir
      size: 439806739
      nfiles: 1
    - path: data/06_models/simple_image
      md5: 1ea2aa1734642090279cf32f81d3418b.dir
      size: 25186127
      nfiles: 1
    - path: data/06_models/simple_mlp_image
      md5: 2def1430c081b8a0aa141583088a1be1.dir
      size: 231635489
      nfiles: 1
    - path: data/06_models/simple_text
      md5: afdce5caafc92210085f0fa96b768e90.dir
      size: 97934463
      nfiles: 1
    - path: data/06_models/visual_bert
      md5: bea34f6e992041c3a1a6fd4def269bf1.dir
      size: 1623293991
      nfiles: 1
    - path: data/06_models/vit
      md5: 0d79354dd468d84b16aed228bf8dbcf5.dir
      size: 372105817
      nfiles: 1
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/super_model.py
      md5: 5eab5caed5d8426190d96b09912a0ce2
      size: 5622
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/super_model
      md5: 6d0cbfe913631c739e9a9e5507c090a3.dir
      size: 1441887672
      nfiles: 1
  test_vit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_vit_image_metrics --project test && echo \"\
      PASSED\" > logs/test_vit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/baseIT.py
      md5: 1e4268651c4106c223d6c460e0ecc688
      size: 5144
    outs:
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  vit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 0 --lr\
      \ 1e-05 --epochs 100 --max_length 64 --dense_dim 128 --dropout_rate 0.1 --grad_clip\
      \ 1.0 --model_dir data/06_models/vit --project vit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/baseIT.py
      md5: 1e4268651c4106c223d6c460e0ecc688
      size: 5144
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/vit
      md5: 51ff6504d6f50b0653021e37bde1d000.dir
      size: 372117097
      nfiles: 1
  test_beit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 4  --fast_dev_run\
      \ True && echo \"PASSED\" > logs/test_beit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/baseIT.py
      md5: 1e4268651c4106c223d6c460e0ecc688
      size: 5144
    outs:
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  beit:
    cmd: "python -m hateful_memes.models.baseIT --model_name beit --batch_size 0 --lr\
      \ 1e-05 --epochs 100 --max_length 64 --dense_dim 128 --dropout_rate 0.1 --grad_clip\
      \ 1.0 --model_dir data/06_models/beit --project beit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/baseIT.py
      md5: 1e4268651c4106c223d6c460e0ecc688
      size: 5144
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/beit
      md5: 89c15b2b643211f147a7824c8d8b6b90.dir
      size: 439817955
      nfiles: 1
  test_electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name google/electra-small-discriminator && echo \"PASSED\" >\
      \ logs/test_electra.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/auto_text_model.py
      md5: 579f641133a57c00135d00872fc0098c
      size: 3089
    outs:
    - path: logs/test_electra.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 0 --lr 1e-05\
      \ --epochs 100 --max_length 64 --dense_dim 256 --dropout_rate 0.1 --grad_clip\
      \ 1.0 --model_name google/electra-small-discriminator --project electra --model_dir\
      \ data/06_models/electra\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/auto_text_model.py
      md5: 579f641133a57c00135d00872fc0098c
      size: 3089
    - path: logs/test_electra.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/electra
      md5: 928abb149e16e812f159ccaa6cba3505.dir
      size: 212344633
      nfiles: 1
  test_distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name distilbert-base-uncased-finetuned-sst-2-english && echo\
      \ \"PASSED\" > logs/test_distilbert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/auto_text_model.py
      md5: 579f641133a57c00135d00872fc0098c
      size: 3089
    outs:
    - path: logs/test_distilbert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 0 --lr 1e-05\
      \ --epochs 100 --max_length 64 --dense_dim 256 --dropout_rate 0.1 --grad_clip\
      \ 1.0 --model_name distilbert-base-uncased-finetuned-sst-2-english --project\
      \ distilbert --model_dir data/06_models/distilbert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/auto_text_model.py
      md5: 579f641133a57c00135d00872fc0098c
      size: 3089
    - path: logs/test_distilbert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/distilbert
      md5: 69b712255f9f41a9211873033641a511.dir
      size: 947461389
      nfiles: 1
  test_visual_bert_with_od:
    cmd: "python -m hateful_memes.models.visual_bert_with_od --batch_size 4  --fast_dev_run\
      \ True && echo \"PASSED\" > logs/test_visual_bert_with_od.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert_with_od.py
      md5: 3f308ce2973e4b097a597a7fdc06b68c
      size: 6308
    outs:
    - path: logs/test_visual_bert_with_od.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  visual_bert_with_od:
    cmd: "python -m hateful_memes.models.visual_bert_with_od --lr 1e-05 --epochs 100\
      \ --max_length 64 --dense_dim 256 --dropout_rate 0.0 --num_queries 50 --batch_size\
      \ 32 --grad_clip 1.0 --model_dir data/06_models/visual_bert_with_od\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 038d02292880a30c2b0241ff4777eee0
      size: 8565
    - path: hateful_memes/models/base.py
      md5: 01c81b43a5a49a99ab40dfd8dab6c037
      size: 6681
    - path: hateful_memes/models/visual_bert_with_od.py
      md5: 3f308ce2973e4b097a597a7fdc06b68c
      size: 6308
    - path: logs/test_visual_bert_with_od.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert_with_od
      md5: 4fa6eed6d8cd9d8429c6edea55ea0851.dir
      size: 718504169
      nfiles: 1
