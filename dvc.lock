schema: '2.0'
stages:
  visual_bert:
    cmd: "python src/models/visual_bert.py --batch_size 16 --lr 1e-05 --epochs 100\
      \ --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_dir data/06_models/visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: logs/test_visual_bert.log
      md5: 7b0ead2c6ba17bb662a10807f5a4eefe
      size: 774
    - path: src/models/visual_bert.py
      md5: 29aa2379dd671f3a2786e52a115a8a8f
      size: 8486
    outs:
    - path: data/06_models/visual_bert
      md5: 0c7c552e91ac13b5a88a1b5dc7056dab.dir
      size: 1623288615
      nfiles: 1
    - path: data/08_reporting/visual_bert
      md5: 421aedf9497d8b2e2020a063a874df1a.dir
      size: 2352
      nfiles: 5
  simple_image_model:
    cmd: "python src/models/simple_image_model.py --batch_size 64 --lr 1e-05 --epochs\
      \ 50 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/simple_image_model.py
      md5: 6ea1461e197fdd0a7de6b55e40032e05
      size: 3551
    params:
      params.yaml:
        simple_image_model:
          batch_size: 64
          source: src/models/simple_image_model.py
          lr: 1e-05
          epochs: 50
          dense_dim: 128
          dropout_rate: 0.1
          gradient_clip_value: 1.0
    outs:
    - path: data/06_models/simple_image
      md5: f20dbc0bc7255cdc1c73b92a5d839b0b.dir
      size: 66949174
      nfiles: 1
    - path: data/08_reporting/simple_image
      md5: 05a171a503e9a1e161dc1118e1af3dcb.dir
      size: 108467
      nfiles: 9
  baseline_model:
    cmd: python src/models/baseline_algorithm.py
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/baseline_algorithm.py
      md5: a1d8733acc890fb558376326040a33d2
      size: 2043
    outs:
    - path: data/08_reporting/baseline
      md5: 7f01c28a6be9da2e83d73ef80da106ab.dir
      size: 148
      nfiles: 3
  simple_mlp_image:
    cmd: "python src/models/simple_mlp_image.py --batch_size 128 --lr 1e-05 --epochs\
      \ 50 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: logs/test_simple_mlp_image.log
      md5: 67017cb447b27c0c1e7bac758226d75d
      size: 2020
    - path: src/models/simple_mlp_image.py
      md5: 2e50ff51b9df62f854148f048469fa96
      size: 3237
    outs:
    - path: data/06_models/simple_mlp_image
      md5: 0b9b89699cbc0d55567bc3773c4253ac.dir
      size: 231418921
      nfiles: 1
    - path: data/08_reporting/simple_mlp_image
      md5: 8718321ed5e768febb1476cebeec741c.dir
      size: 2142
      nfiles: 5
  simple_image:
    cmd: "python src/models/simple_image.py --batch_size 64 --lr 1e-05 --epochs 50\
      \ --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_image\
      \ --batch_norm true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: logs/test_simple_image.log
      md5: 12555beaa9047a9879a38ec02eb06349
      size: 1423
    - path: src/models/simple_image.py
      md5: 479e495d2c62c80ebbff6e3287e83b2a
      size: 4036
    outs:
    - path: data/06_models/simple_image
      md5: 3f5fb0a92dab73ce853baf5978977e4b.dir
      size: 66949619
      nfiles: 1
    - path: data/08_reporting/simple_image
      md5: 7e8076177560474f068bb1c57ae958bb.dir
      size: 2162
      nfiles: 5
  test_simple_mlp_image:
    cmd: "python src/models/simple_mlp_image.py  --fast_dev_run True |& tee logs/test_simple_mlp_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/simple_mlp_image.py
      md5: 2e50ff51b9df62f854148f048469fa96
      size: 3237
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 67017cb447b27c0c1e7bac758226d75d
      size: 2020
  test_visual_bert:
    cmd: "python src/models/visual_bert.py --batch_size 4  --fast_dev_run True |&\
      \ tee logs/test_visual_bert.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/visual_bert.py
      md5: 29aa2379dd671f3a2786e52a115a8a8f
      size: 8486
    outs:
    - path: logs/test_visual_bert.log
      md5: 7b0ead2c6ba17bb662a10807f5a4eefe
      size: 774
  test_simple_image:
    cmd: "python src/models/simple_image.py  --fast_dev_run True |& tee logs/test_simple_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: src/models/simple_image.py
      md5: 479e495d2c62c80ebbff6e3287e83b2a
      size: 4036
    outs:
    - path: logs/test_simple_image.log
      md5: 12555beaa9047a9879a38ec02eb06349
      size: 1423
