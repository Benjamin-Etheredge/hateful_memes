schema: '2.0'
stages:
  test_visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_visual_bert_image_metrics --project test &&\
      \ echo \"PASSED\" > logs/test_visual_bert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/visual_bert.py
      md5: 7dcea0d6d52e10a4f1dd5e7b80b2bb8e
      size: 4194
    outs:
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_simple_image:
    cmd: "python -m hateful_memes.models.simple_image --log_dir logs/test_simple_image_metrics\
      \ --project test --fast_dev_run True && echo \"PASSED\" > logs/test_simple_image.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_image.py
      md5: d519137d502c0d9bed201f7849d73c5c
      size: 4595
    outs:
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_image:
    cmd: "python -m hateful_memes.models.simple_image --batch_size 128 --lr 0.001\
      \ --epochs 1000 --dense_dim 512 --dropout_rate 0.5 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_image --batch_norm true --project iso_simple_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_image.py
      md5: d519137d502c0d9bed201f7849d73c5c
      size: 4595
    - path: logs/test_simple_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_image
      md5: 4df94d4c1de038039d2f3f7726ef3e56.dir
      size: 88192761
      nfiles: 1
  test_simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --fast_dev_run True --log_dir\
      \ logs/test_simple_mlp_image_metrics --project test && echo \"PASSED\" > logs/test_simple_mlp_image.log\
      \ \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 69fe90eb218b10667d9a72c084dada79
      size: 2749
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --batch_size 128 --lr 1e-05\
      \ --epochs 1000 --dense_dim 128 --dropout_rate 0.2 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image --project iso_simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 69fe90eb218b10667d9a72c084dada79
      size: 2749
    - path: logs/test_simple_mlp_image.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_mlp_image
      md5: 8b7ff22763f709074def8f2c954ee613.dir
      size: 231627955
      nfiles: 1
  baseline:
    cmd: python -m hateful_memes.models.baseline_algorithm
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: 5b5bbee254ba72de45450417e2b0efc5
      size: 2214
  visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 64 --lr 0.001 --epochs\
      \ 1000 --dense_dim 1024 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/visual_bert\
      \ --project iso_visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/visual_bert.py
      md5: 7dcea0d6d52e10a4f1dd5e7b80b2bb8e
      size: 4194
    - path: logs/test_visual_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert
      md5: 3bce08cf3a84fc3bfadb7676ec89d46f.dir
      size: 600562525
      nfiles: 1
  simple_text:
    cmd: "python -m hateful_memes.models.simple_text --batch_size 128 --lr 0.001 --num_layers\
      \ 8 --embed_dim 512 --dense_dim 512 --max_length 96 --tokenizer_name bert-base-uncased\
      \ --grad_clip 1.0 --dropout_rate 0.1 --epochs 1000 --model_dir data/06_models/simple_text\
      \ --project iso_simple_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_text.py
      md5: e97f6413ec92d21fcaa6da09b7f548be
      size: 3886
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_text
      md5: bfa96a83dd9202549ffa2212b5e23fae.dir
      size: 392433711
      nfiles: 1
  test_simple_text:
    cmd: "python -m hateful_memes.models.simple_text --fast_dev_run True && echo \"\
      PASSED\" > logs/test_simple_text.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_text.py
      md5: e97f6413ec92d21fcaa6da09b7f548be
      size: 3886
    outs:
    - path: logs/test_simple_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  test_super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_ckpt data/06_models/simple_image\
      \ --simple_text_ckpt data/06_models/simple_text --fast_dev_run True && echo\
      \ \"PASSED\" > logs/test_super_model.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/simple_image
      md5: 4df94d4c1de038039d2f3f7726ef3e56.dir
      size: 88192761
      nfiles: 1
    - path: data/06_models/simple_text
      md5: bfa96a83dd9202549ffa2212b5e23fae.dir
      size: 392433711
      nfiles: 1
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/super_model.py
      md5: 5e9ee99a030b7756aae33b3766b4447b
      size: 7134
    outs:
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  super_model:
    cmd: "python -m hateful_memes.models.super_model --simple_image_ckpt data/06_models/simple_image\
      \ --simple_mlp_image_ckpt data/06_models/simple_mlp_image --simple_text_ckpt\
      \ data/06_models/simple_text --visual_bert_ckpt data/06_models/visual_bert --vit_ckpt\
      \ data/06_models/vit --beit_ckpt data/06_models/beit --electra_ckpt data/06_models/electra\
      \ --distilbert_ckpt data/06_models/distilbert --batch_size 16 --lr 0.001 --dense_dim\
      \ 1024 --dropout_rate 0.5 --grad_clip 1.0 --epochs 1000 --model_dir data/06_models/super_model\
      \ --project iso_super_model\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: data/06_models/beit
      md5: ac55abf5ff4d88a62c1fc1e692fc49cb.dir
      size: 1034346911
      nfiles: 1
    - path: data/06_models/distilbert
      md5: e0b3499241c76376240c440ec8f84aa9.dir
      size: 274977501
      nfiles: 1
    - path: data/06_models/electra
      md5: 19765821bc2be5588f284ee0512548ae.dir
      size: 57236437
      nfiles: 1
    - path: data/06_models/simple_image
      md5: 4df94d4c1de038039d2f3f7726ef3e56.dir
      size: 88192761
      nfiles: 1
    - path: data/06_models/simple_mlp_image
      md5: 8b7ff22763f709074def8f2c954ee613.dir
      size: 231627955
      nfiles: 1
    - path: data/06_models/simple_text
      md5: bfa96a83dd9202549ffa2212b5e23fae.dir
      size: 392433711
      nfiles: 1
    - path: data/06_models/visual_bert
      md5: 3bce08cf3a84fc3bfadb7676ec89d46f.dir
      size: 600562525
      nfiles: 1
    - path: data/06_models/vit
      md5: 295069c0726ce6cb9587f080da78bfd5.dir
      size: 1038114165
      nfiles: 1
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/super_model.py
      md5: 5e9ee99a030b7756aae33b3766b4447b
      size: 7134
    - path: logs/test_super_model.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/super_model
      md5: e512571e16ed06f626bf6d5562d5888b.dir
      size: 1870399146
      nfiles: 1
  test_vit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_vit_image_metrics --project test && echo \"\
      PASSED\" > logs/test_vit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/baseIT.py
      md5: b886f244c754c0fcacc0d53bb413cccf
      size: 3638
    outs:
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  vit:
    cmd: "python -m hateful_memes.models.baseIT --model_name vit --batch_size 64 --lr\
      \ 0.0001 --epochs 1000 --dense_dim 128 --dropout_rate 0.2 --grad_clip 1.0 --model_dir\
      \ data/06_models/vit --project iso_vit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/baseIT.py
      md5: b886f244c754c0fcacc0d53bb413cccf
      size: 3638
    - path: logs/test_vit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/vit
      md5: 295069c0726ce6cb9587f080da78bfd5.dir
      size: 1038114165
      nfiles: 1
  test_beit:
    cmd: "python -m hateful_memes.models.baseIT --model_name beit --batch_size 4 \
      \ --fast_dev_run True && echo \"PASSED\" > logs/test_beit.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/baseIT.py
      md5: b886f244c754c0fcacc0d53bb413cccf
      size: 3638
    outs:
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  beit:
    cmd: "python -m hateful_memes.models.baseIT --model_name beit --batch_size 64\
      \ --lr 0.001 --epochs 1000 --dense_dim 128 --dropout_rate 0.2 --grad_clip 1.0\
      \ --model_dir data/06_models/beit --project iso_beit\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/baseIT.py
      md5: b886f244c754c0fcacc0d53bb413cccf
      size: 3638
    - path: logs/test_beit.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/beit
      md5: ac55abf5ff4d88a62c1fc1e692fc49cb.dir
      size: 1034346911
      nfiles: 1
  test_electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name google/electra-small-discriminator && echo \"PASSED\" >\
      \ logs/test_electra.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/auto_text_model.py
      md5: 9789bb7dd6453a44b2f5863050e738ed
      size: 3399
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    outs:
    - path: logs/test_electra.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 128 --lr 0.001\
      \ --epochs 1000 --max_length 96 --dense_dim 1024 --dropout_rate 0.2 --grad_clip\
      \ 1.0 --model_name google/electra-small-discriminator --model_dir data/06_models/electra\
      \ --project iso_electra\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/auto_text_model.py
      md5: 9789bb7dd6453a44b2f5863050e738ed
      size: 3399
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: logs/test_electra.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/electra
      md5: 19765821bc2be5588f284ee0512548ae.dir
      size: 57236437
      nfiles: 1
  test_distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name distilbert-base-uncased-finetuned-sst-2-english && echo\
      \ \"PASSED\" > logs/test_distilbert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/auto_text_model.py
      md5: 9789bb7dd6453a44b2f5863050e738ed
      size: 3399
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    outs:
    - path: logs/test_distilbert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  distilbert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 128 --lr 0.001\
      \ --epochs 1000 --max_length 96 --dense_dim 1024 --dropout_rate 0.2 --grad_clip\
      \ 1.0 --model_name distilbert-base-uncased-finetuned-sst-2-english --model_dir\
      \ data/06_models/distilbert --project iso_distilbert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/auto_text_model.py
      md5: 9789bb7dd6453a44b2f5863050e738ed
      size: 3399
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: logs/test_distilbert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/distilbert
      md5: e0b3499241c76376240c440ec8f84aa9.dir
      size: 274977501
      nfiles: 1
  test_visual_bert_with_od:
    cmd: "python -m hateful_memes.models.visual_bert_with_od --batch_size 4  --fast_dev_run\
      \ True && echo \"PASSED\" > logs/test_visual_bert_with_od.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert_with_od.py
      md5: a36396c47183d754f16ef581b31056c4
      size: 7488
    outs:
    - path: logs/test_visual_bert_with_od.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  visual_bert_with_od:
    cmd: "python -m hateful_memes.models.visual_bert_with_od --lr 0.001 --epochs 1000\
      \ --max_length 96 --dense_dim 1024 --dropout_rate 0.2 --num_queries 5 --batch_size\
      \ 8 --grad_clip 1.0 --weight_decay 0.001 --model_dir data/06_models/visual_bert_with_od\
      \ --project iso_visual_bert_with_od\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/visual_bert_with_od.py
      md5: a36396c47183d754f16ef581b31056c4
      size: 7488
    - path: logs/test_visual_bert_with_od.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/visual_bert_with_od
      md5: 5b801b06ade655902bf0193bc1cdc6d5.dir
      size: 826256820
      nfiles: 1
  hateful_memes_to_snli_ve:
    cmd: python hateful_memes/data/hateful_memes_snli_ve.py
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes_snli_ve.py
      md5: b99996b91149bb58162e3e49ca1d8843
      size: 4483
    outs:
    - path: data/02_intermediate/hateful_memes_train_snli_ve.tsv
      md5: a4aa96507523cfab3af40019c2020f8a
      size: 4077674756
    - path: data/02_intermediate/hateful_memes_valid_snli_ve.tsv
      md5: e53d1c118761446cd00d926469da82f5
      size: 252275396
  test_hateful_ofa:
    cmd: "python -m hateful_memes.models.hateful_ofa data/02_intermediate/hateful_memes_train_snli_ve.tsv,data/02_intermediate/hateful_memes_valid_snli_ve.tsv\
      \ --selected-cols 0,2,3,4,5 --restore-file data/06_models/ofa/snli_ve_large_best.pt\
      \ --save-dir data/06_models/hateful_ofa --log-dir logs/hateful_ofa --task snli_ve\
      \  --arch ofa_large --batch-size 1 --encoder-normalize-before --decoder-normalize-before\
      \ --share-decoder-input-output-embed --share-all-embeddings --layernorm-embedding\
      \  --patch-layernorm-embedding --code-layernorm-embedding  --resnet-drop-path-rate\
      \ 0.0  --encoder-drop-path-rate 0.2 --decoder-drop-path-rate 0.2 --dropout 0.1\
      \  --attention-dropout 0.0 --weight-decay 0.01  --optimizer adam  --adam-betas\
      \ 0.9,0.999 --adam-eps 1e-08 --clip-norm 1.0 --lr 2e-05  --max-epoch 6  --fixed-validation-seed\
      \ 7  --max-src-length 80 --max-tgt-length 20 --find-unused-parameters  --add-type-embedding\
      \  --scale-attn  --scale-fc  --scale-heads  --disable-entangle  --num-bins 1000\
      \ --patch-image-size 480 --prompt-type prev_output  --add-caption  --fp16  --fp16-scale-window\
      \ 512 --num-workers 0 --ema-alpha 0.1 --fast-dev-run 1 --monitor-metric val/loss\
      \ --monitor-metric-mode min --stopping-patience 10 && echo \"PASSED\" > logs/test_hateful_ofa.log\n"
    deps:
    - path: data/02_intermediate/hateful_memes_train_snli_ve.tsv
      md5: a4aa96507523cfab3af40019c2020f8a
      size: 4077674756
    - path: data/02_intermediate/hateful_memes_valid_snli_ve.tsv
      md5: e53d1c118761446cd00d926469da82f5
      size: 252275396
    - path: data/06_models/ofa/snli_ve_large_best.pt
      md5: 8368190a42477d2974fa0affb6279f00
      size: 6230613509
    - path: hateful_memes/models/hateful_ofa.py
      md5: f53103e1d54c5cb6837d03949f184b0d
      size: 16504
    outs:
    - path: logs/test_hateful_ofa.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  train_hateful_ofa:
    cmd: "python -m hateful_memes.models.hateful_ofa data/02_intermediate/hateful_memes_train_snli_ve.tsv,data/02_intermediate/hateful_memes_valid_snli_ve.tsv\
      \ --selected-cols 0,2,3,4,5 --restore-file data/06_models/ofa/snli_ve_large_best.pt\
      \ --save-dir data/06_models/hateful_ofa --log-dir logs/hateful_ofa --task snli_ve\
      \  --arch ofa_large --batch-size 4 --encoder-normalize-before --decoder-normalize-before\
      \ --share-decoder-input-output-embed --share-all-embeddings --layernorm-embedding\
      \  --patch-layernorm-embedding --code-layernorm-embedding  --resnet-drop-path-rate\
      \ 0.0  --encoder-drop-path-rate 0.2 --decoder-drop-path-rate 0.2 --dropout 0.1\
      \  --attention-dropout 0.0 --weight-decay 0.01  --optimizer adam  --adam-betas\
      \ 0.9,0.999 --adam-eps 1e-08 --clip-norm 1.0 --lr 2e-05  --max-epoch 6  --fixed-validation-seed\
      \ 7  --max-src-length 80 --max-tgt-length 20 --find-unused-parameters  --add-type-embedding\
      \  --scale-attn  --scale-fc  --scale-heads  --disable-entangle  --num-bins 1000\
      \ --patch-image-size 480 --prompt-type prev_output  --add-caption  --fp16  --fp16-scale-window\
      \ 512 --num-workers 8 --ema-alpha 0.11 --fast-dev-run 0 --monitor-metric val/loss\
      \ --monitor-metric-mode min --stopping-patience 10\n"
    deps:
    - path: data/02_intermediate/hateful_memes_train_snli_ve.tsv
      md5: a4aa96507523cfab3af40019c2020f8a
      size: 4077674756
    - path: data/02_intermediate/hateful_memes_valid_snli_ve.tsv
      md5: e53d1c118761446cd00d926469da82f5
      size: 252275396
    - path: data/06_models/ofa/snli_ve_large_best.pt
      md5: 8368190a42477d2974fa0affb6279f00
      size: 6230613509
    - path: hateful_memes/models/hateful_ofa.py
      md5: 6965dbf385ca878f170249ba4e446cf8
      size: 14416
    outs:
    - path: data/06_models/hateful_ofa
      md5: 6dd58cb3ed6d31dca6c7d93ba3d3d35f.dir
      size: 5719131362
      nfiles: 1
  test_simple_image_text:
    cmd: "python -m hateful_memes.models.simple_image_text --fast_dev_run True &&\
      \ echo \"PASSED\" > logs/test_simple_image_text.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_image_text.py
      md5: ecfd2811492c5ded2345fa1e0bebe4e2
      size: 6121
    outs:
    - path: logs/test_simple_image_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  simple_image_text:
    cmd: "python -m hateful_memes.models.simple_image_text --batch_size 128 --lr 0.001\
      \ --num_layers 8 --embed_dim 256 --dense_dim 512 --max_length 96 --tokenizer_name\
      \ bert-base-uncased --grad_clip 1.0 --dropout_rate 0.2 --epochs 1000 --model_dir\
      \ data/06_models/simple_image_text --project iso_simple_image_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/simple_text.py
      md5: e97f6413ec92d21fcaa6da09b7f548be
      size: 3886
    - path: logs/test_simple_image_text.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/simple_image_text
      md5: c6c992675d71fe3c670595e4a7972b00.dir
      size: 386805281
      nfiles: 1
  test_resnet_hate_bert:
    cmd: "python -m hateful_memes.models.resnet_hate_bert --batch_size 4  --fast_dev_run\
      \ True && echo \"PASSED\" > logs/test_resnet_hate_bert.log\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/resnet_hate_bert.py
      md5: 9cdf8d6774741e6d18a1532204b3a054
      size: 4662
    outs:
    - path: logs/test_resnet_hate_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  resnet_hate_bert:
    cmd: "python -m hateful_memes.models.resnet_hate_bert --batch_size 64 --lr 0.001\
      \ --max_length 96 --dense_dim 1024 --dropout_rate 0.5 --model_dir data/06_models/resnet_hate_bert\
      \ --project iso_resnet_hate_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: hateful_memes/models/resnet_hate_bert.py
      md5: 9cdf8d6774741e6d18a1532204b3a054
      size: 4662
    - path: logs/test_resnet_hate_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/resnet_hate_bert
      md5: cc7892d7b136a6f8ea2513f072e798c0.dir
      size: 460323029
      nfiles: 1
  test_hate_bert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name am4nsolanki/autonlp-text-hateful-memes-36789092 && echo\
      \ \"PASSED\" > logs/test_hate_bert.log \n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/auto_text_model.py
      md5: 9789bb7dd6453a44b2f5863050e738ed
      size: 3399
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    outs:
    - path: logs/test_hate_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
  hate_bert:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 64 --lr 0.001\
      \ --epochs 1000 --max_length 96 --dense_dim 1024 --dropout_rate 0.2 --grad_clip\
      \ 1.0 --model_name am4nsolanki/autonlp-text-hateful-memes-36789092 --model_dir\
      \ data/06_models/hate_bert --project iso_hate_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/data/hateful_memes.py
      md5: 79a969a71497fd2da5967f6633d6c55b
      size: 10785
    - path: hateful_memes/models/auto_text_model.py
      md5: 9789bb7dd6453a44b2f5863050e738ed
      size: 3399
    - path: hateful_memes/models/base.py
      md5: 52842bcf583f855b18c5ac44cad6c749
      size: 8293
    - path: logs/test_hate_bert.log
      md5: 15de982d1dc99ce52d089868a579de34
      size: 7
    outs:
    - path: data/06_models/hate_bert
      md5: f5c98863f681776c05fdf85c191ebb6c.dir
      size: 270289629
      nfiles: 1
  interp_super:
    cmd: "python -m hateful_memes.report.model_interp --model_name super-model --ckpt_dir\
      \ data/06_models/super_model --batch_size 50 --save_dir data/08_reporting/interp_data/super_model\
      \ --save_prefix attr_study --ensemble\n"
    deps:
    - path: hateful_memes/models/auto_text_model.py
      md5: 68e0c237a051e862975877073a85480f
      size: 3465
    - path: hateful_memes/models/baseIT.py
      md5: beb7026b19d9c272f15b68dbfa3cc475
      size: 3668
    - path: hateful_memes/models/simple_image.py
      md5: 2a1060dee85fe8cca185afb1233ca7fa
      size: 4621
    - path: hateful_memes/models/simple_mlp_image.py
      md5: b2f62e921e00d5256a78504ec4550073
      size: 2779
    - path: hateful_memes/models/simple_text.py
      md5: cb5958948d7895e3f10a37de07c87270
      size: 3911
    - path: hateful_memes/models/super_model.py
      md5: 894b4fa416a2d1c8acb12091b6a25648
      size: 7157
    - path: hateful_memes/models/visual_bert.py
      md5: de92369929a235b8f50619de6180e25d
      size: 4090
    - path: hateful_memes/report/model_interp.py
      md5: b8feed650ceaaedada1f4b591573b235
      size: 8807
    - path: hateful_memes/report/model_wrappers.py
      md5: ade70958c8f001e6e8df4bf4853bd958
      size: 5152
    outs:
    - path: data/08_reporting/interp_data/super_model
      md5: 341ca37bc115ce4fa376308084b22a3e.dir
      size: 43143139
      nfiles: 1
  vis_super:
    cmd: "python -m hateful_memes.report.interp_visualize  --attr_file data/08_reporting/interp_data/super_model\
      \ --save_dir data/08_reporting/interp_vis/super_model --save_prefix attr_study_vis\
      \ --ensemble\n"
    deps:
    - path: data/08_reporting/interp_data/super_model
      md5: 341ca37bc115ce4fa376308084b22a3e.dir
      size: 43143139
      nfiles: 1
    - path: hateful_memes/report/interp_visualize.py
      md5: 82e1167cd2afd8ff38e079edf4bda0f6
      size: 13919
    - path: hateful_memes/report/model_wrappers.py
      md5: ade70958c8f001e6e8df4bf4853bd958
      size: 5152
    outs:
    - path: data/08_reporting/interp_vis/super_model
      md5: 6672daaaf099840234e9bc98c5c1f79e.dir
      size: 172147
      nfiles: 3
  interp_vb:
    cmd: "python -m hateful_memes.report.model_interp --model_name visual-bert --ckpt_dir\
      \ data/06_models/visual_bert --save_dir data/08_reporting/interp_data/visual_bert\
      \ --save_prefix attr_study --trials 20\n"
    deps:
    - path: hateful_memes/models/visual_bert.py
      md5: de92369929a235b8f50619de6180e25d
      size: 4090
    - path: hateful_memes/report/model_interp.py
      md5: b8feed650ceaaedada1f4b591573b235
      size: 8807
    - path: hateful_memes/report/model_wrappers.py
      md5: ade70958c8f001e6e8df4bf4853bd958
      size: 5152
    outs:
    - path: data/08_reporting/interp_data/visual_bert
      md5: 65e9bd4bbd8829be7379d819425237ac.dir
      size: 56393772
      nfiles: 20
  vis_vb:
    cmd: "python -m hateful_memes.report.interp_visualize  --attr_file data/08_reporting/interp_data/visual_bert\
      \ --save_dir data/08_reporting/interp_vis/visual_bert --save_prefix attr_study_vis\n"
    deps:
    - path: data/08_reporting/interp_data/visual_bert
      md5: 65e9bd4bbd8829be7379d819425237ac.dir
      size: 56393772
      nfiles: 20
    - path: hateful_memes/report/interp_visualize.py
      md5: 82e1167cd2afd8ff38e079edf4bda0f6
      size: 13919
    - path: hateful_memes/report/model_wrappers.py
      md5: ade70958c8f001e6e8df4bf4853bd958
      size: 5152
    outs:
    - path: data/08_reporting/interp_vis/visual_bert/
      md5: 69bd9dc57ab143d932b7a97a91d414cd.dir
      size: 5964889
      nfiles: 20
  interp_vb@trial4:
    cmd: "python -m hateful_memes.report.model_interp --model_name visual-bert --ckpt_dir\
      \ data/06_models/visual_bert --save_name data/08_reporting/interp_data/visual_bert/attr_study_trial4.pt\n"
    deps:
    - path: hateful_memes/models/visual_bert.py
      md5: de92369929a235b8f50619de6180e25d
      size: 4090
    - path: hateful_memes/report/model_interp.py
      md5: b954023f44d3d3ec5e4186729b6c7c00
      size: 7986
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial4.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
  interp_vb@trial3:
    cmd: "python -m hateful_memes.report.model_interp --model_name visual-bert --ckpt_dir\
      \ data/06_models/visual_bert --save_name data/08_reporting/interp_data/visual_bert/attr_study_trial3.pt\n"
    deps:
    - path: hateful_memes/models/visual_bert.py
      md5: de92369929a235b8f50619de6180e25d
      size: 4090
    - path: hateful_memes/report/model_interp.py
      md5: b954023f44d3d3ec5e4186729b6c7c00
      size: 7986
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial3.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
  vis_vb@trial3:
    cmd: "python -m hateful_memes.report.interp_visualize  --attr_file data/08_reporting/interp_data/visual_bert/attr_study_trial3.pt\
      \ --save_dir data/08_reporting/interp_vis/visual_bert --save_prefix attr_study_vis_trial3\n"
    deps:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial3.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
    - path: hateful_memes/report/interp_visualize.py
      md5: b02a4d159bb3c1564fd2711fb9de4e08
      size: 13259
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_vis/visual_bert/attr_study_vis_trial3.png
      md5: d8f5d8fc1f95b926cf6917209f4f8065
      size: 344353
  interp_vb@trial2:
    cmd: "python -m hateful_memes.report.model_interp --model_name visual-bert --ckpt_dir\
      \ data/06_models/visual_bert --save_name data/08_reporting/interp_data/visual_bert/attr_study_trial2.pt\n"
    deps:
    - path: hateful_memes/models/visual_bert.py
      md5: de92369929a235b8f50619de6180e25d
      size: 4090
    - path: hateful_memes/report/model_interp.py
      md5: b954023f44d3d3ec5e4186729b6c7c00
      size: 7986
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial2.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
  vis_vb@trial2:
    cmd: "python -m hateful_memes.report.interp_visualize  --attr_file data/08_reporting/interp_data/visual_bert/attr_study_trial2.pt\
      \ --save_dir data/08_reporting/interp_vis/visual_bert --save_prefix attr_study_vis_trial2\n"
    deps:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial2.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
    - path: hateful_memes/report/interp_visualize.py
      md5: b02a4d159bb3c1564fd2711fb9de4e08
      size: 13259
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_vis/visual_bert/attr_study_vis_trial2.png
      md5: 66a543d0f6a05a91bb1f7fca2174e2f4
      size: 344512
  interp_vb@trial10:
    cmd: "python -m hateful_memes.report.model_interp --model_name visual-bert --ckpt_dir\
      \ data/06_models/visual_bert --save_name data/08_reporting/interp_data/visual_bert/attr_study_trial10.pt\n"
    deps:
    - path: hateful_memes/models/visual_bert.py
      md5: de92369929a235b8f50619de6180e25d
      size: 4090
    - path: hateful_memes/report/model_interp.py
      md5: b954023f44d3d3ec5e4186729b6c7c00
      size: 7986
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial10.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
  vis_vb@trial10:
    cmd: "python -m hateful_memes.report.interp_visualize  --attr_file data/08_reporting/interp_data/visual_bert/attr_study_trial10.pt\
      \ --save_dir data/08_reporting/interp_vis/visual_bert --save_prefix attr_study_vis_trial10\n"
    deps:
    - path: data/08_reporting/interp_data/visual_bert/attr_study_trial10.pt
      md5: 27c75e45db1fed068d89948b6804794d
      size: 2836191
    - path: hateful_memes/report/interp_visualize.py
      md5: b02a4d159bb3c1564fd2711fb9de4e08
      size: 13259
    - path: hateful_memes/report/model_wrappers.py
      md5: d3c5977e534f029887d1a4068642fee8
      size: 4826
    outs:
    - path: data/08_reporting/interp_vis/visual_bert/attr_study_vis_trial10.png
      md5: 66a543d0f6a05a91bb1f7fca2174e2f4
      size: 344512
  interp_dbert:
    cmd: "python -m hateful_memes.report.model_interp --model_name distilbert --ckpt_dir\
      \ data/06_models/distilbert --save_dir data/08_reporting/interp_data/distilbert\
      \ --save_prefix attr_study --trials 20\n"
    deps:
    - path: hateful_memes/models/auto_text_model.py
      md5: 68e0c237a051e862975877073a85480f
      size: 3465
    - path: hateful_memes/report/model_interp.py
      md5: b8feed650ceaaedada1f4b591573b235
      size: 8807
    - path: hateful_memes/report/model_wrappers.py
      md5: ade70958c8f001e6e8df4bf4853bd958
      size: 5152
    outs:
    - path: data/08_reporting/interp_data/distilbert
      md5: 0f5619a0f0529e73c71877f682a0a918.dir
      size: 28397756
      nfiles: 20
  vis_dbert:
    cmd: "python -m hateful_memes.report.interp_visualize  --attr_file data/08_reporting/interp_data/distilbert\
      \ --save_dir data/08_reporting/interp_vis/distilbert --save_prefix attr_study_vis\n"
    deps:
    - path: data/08_reporting/interp_data/distilbert
      md5: 0f5619a0f0529e73c71877f682a0a918.dir
      size: 28397756
      nfiles: 20
    - path: hateful_memes/report/interp_visualize.py
      md5: 82e1167cd2afd8ff38e079edf4bda0f6
      size: 13919
    - path: hateful_memes/report/model_wrappers.py
      md5: ade70958c8f001e6e8df4bf4853bd958
      size: 5152
    outs:
    - path: data/08_reporting/interp_vis/distilbert
      md5: 95a65931da0a6cc30667ffe7e62222a5.dir
      size: 2593788
      nfiles: 20
