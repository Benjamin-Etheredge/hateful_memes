schema: '2.0'
stages:
  test_visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 4  --fast_dev_run\
      \ True --log_dir logs/test_simple_visual_bert_image_metrics --project test |\
      \ tee logs/test_visual_bert.log 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert.py
      md5: b532bbc2cbfed541f7de124cbe4da82b
      size: 7166
    outs:
    - path: logs/test_visual_bert.log
      md5: 70af34fe8ea793700383421acf2e45ee
      size: 1043
  test_simple_image:
    cmd: "python -m hateful_memes.models.simple_image --log_dir logs/test_simple_image_metrics\
      \ --project test --fast_dev_run True | tee logs/test_simple_image.log 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_image.py
      md5: eca94b8bc7468bef78e773c12872a8ef
      size: 4273
    outs:
    - path: logs/test_simple_image.log
      md5: 7f9a23b4bcd2e80ee2d833d32a4dce0a
      size: 1043
  simple_image:
    cmd: "python -m hateful_memes.models.simple_image --batch_size 64 --lr 1e-05 --epochs\
      \ 50 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_image\
      \ --batch_norm true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline.py
      md5: 4df00ea9d296f0265653658eccd80ff5
      size: 1674
    - path: hateful_memes/models/simple_image.py
      md5: eca94b8bc7468bef78e773c12872a8ef
      size: 4273
    - path: logs/test_simple_image.log
      md5: 7f9a23b4bcd2e80ee2d833d32a4dce0a
      size: 1043
    outs:
    - path: data/06_models/simple_image
      md5: 2d3cef4efd92a691d246ff7b3f5c0f70.dir
      size: 66951667
      nfiles: 1
  test_simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --fast_dev_run True --log_dir\
      \ logs/test_simple_mlp_image_metrics --project test | tee logs/test_simple_mlp_image.log\
      \ 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_mlp_image.py
      md5: fa9afbc3e24f309b124631f9811c6577
      size: 3623
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 20055e22be0be963f33763cda4b04e46
      size: 1043
  simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --batch_size 128 --lr 1e-05\
      \ --epochs 50 --dense_dim 64 --dropout_rate 0.1 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline.py
      md5: 4df00ea9d296f0265653658eccd80ff5
      size: 1674
    - path: hateful_memes/models/simple_mlp_image.py
      md5: fa9afbc3e24f309b124631f9811c6577
      size: 3623
    - path: logs/test_simple_mlp_image.log
      md5: 20055e22be0be963f33763cda4b04e46
      size: 1043
    outs:
    - path: data/06_models/simple_mlp_image
      md5: cd5a2c7d2d61bb6a5173f1dd1ca23a3c.dir
      size: 115665641
      nfiles: 1
  baseline:
    cmd: python -m hateful_memes.models.baseline_algorithm
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: 5b5bbee254ba72de45450417e2b0efc5
      size: 2214
  visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 16 --lr 1e-05 --epochs\
      \ 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_dir data/06_models/visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert.py
      md5: b532bbc2cbfed541f7de124cbe4da82b
      size: 7166
    - path: logs/test_visual_bert.log
      md5: 70af34fe8ea793700383421acf2e45ee
      size: 1043
    outs:
    - path: data/06_models/visual_bert
      md5: 13431f29fcb3181a6a4e93adea506b63.dir
      size: 1620144243
      nfiles: 1
  simple_text:
    cmd: "python -m hateful_memes.models.simple_text --batch_size 32 --lr 1e-05 --num_layers\
      \ 2 --embed_dim 256 --dense_dim 128 --max_length 512 --tokenizer_name bert-base-uncased\
      \ --grad_clip 1.0 --dropout_rate 0.1 --epochs 50 --model_dir data/06_models/simple_text\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_text.py
      md5: 3d60cb28c157c73c20a921702979f37b
      size: 5164
    - path: logs/test_simple_image.log
      md5: 7f9a23b4bcd2e80ee2d833d32a4dce0a
      size: 1043
    outs:
    - path: data/06_models/simple_text
      md5: 3b20fc399c84b72dd40da63553590581.dir
      size: 97933759
      nfiles: 1
  test_simple_text:
    cmd: "python -m hateful_memes.models.simple_text --fast_dev_run True | tee logs/test_simple_text.log\
      \ 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: 8844b5201ff55743fcd36c40d7352a88.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_text.py
      md5: 3d60cb28c157c73c20a921702979f37b
      size: 5164
    outs:
    - path: logs/test_simple_text.log
      md5: 9c10c3426f35c4788dc9013b2bc7a750
      size: 3635
