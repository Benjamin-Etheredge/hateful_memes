schema: '2.0'
stages:
  test_visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 4  --fast_dev_run\
      \ True | tee logs/test_visual_bert.log 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert.py
      md5: efbff69c281e0de05f3baf9adbd6c74d
      size: 8621
    outs:
    - path: logs/test_visual_bert.log
      md5: 7e2915c02795dc86a612b872583546ee
      size: 997
  test_simple_image:
    cmd: "python -m hateful_memes.models.simple_image --fast_dev_run True | tee logs/test_simple_image.log\
      \ 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_image.py
      md5: 4fa38493d289aaa094110fa1adb3d324
      size: 4173
    outs:
    - path: logs/test_simple_image.log
      md5: a77bcf5b81c080f73d9c1701422ffd92
      size: 1002
  simple_image:
    cmd: "python -m hateful_memes.models.simple_image --batch_size 64 --lr 1e-05 --epochs\
      \ 50 --dense_dim 128 --dropout_rate 0.1 --grad_clip 1.0 --model_dir data/06_models/simple_image\
      \ --batch_norm true\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline.py
      md5: 5c6061f8e78a991416f9c59b9cd28b34
      size: 6262
    - path: hateful_memes/models/simple_image.py
      md5: 4fa38493d289aaa094110fa1adb3d324
      size: 4173
    - path: logs/test_simple_image.log
      md5: a77bcf5b81c080f73d9c1701422ffd92
      size: 1002
    outs:
    - path: data/06_models/simple_image
      md5: 8848b62fc3179f8a0267f5a719e09f6d.dir
      size: 66951667
      nfiles: 1
  test_simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --fast_dev_run True > logs/test_simple_mlp_image.log\
      \ 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 373fedf1b7204d14120e850a2b61b43f
      size: 3444
    outs:
    - path: logs/test_simple_mlp_image.log
      md5: 34b7e01fbb896f603f879478c96bcbe1
      size: 2541
  simple_mlp_image:
    cmd: "python -m hateful_memes.models.simple_mlp_image --batch_size 128 --lr 1e-05\
      \ --epochs 50 --dense_dim 64 --dropout_rate 0.1 --grad_clip 1.0 --model_dir\
      \ data/06_models/simple_mlp_image\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline.py
      md5: 5c6061f8e78a991416f9c59b9cd28b34
      size: 6262
    - path: hateful_memes/models/simple_mlp_image.py
      md5: 373fedf1b7204d14120e850a2b61b43f
      size: 3444
    - path: logs/test_simple_mlp_image.log
      md5: 34b7e01fbb896f603f879478c96bcbe1
      size: 2541
    outs:
    - path: data/06_models/simple_mlp_image
      md5: cd5a2c7d2d61bb6a5173f1dd1ca23a3c.dir
      size: 115665641
      nfiles: 1
  baseline:
    cmd: python -m hateful_memes.models.baseline_algorithm
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/baseline_algorithm.py
      md5: a980fed1ee6d679f5be3e00648e0ccbd
      size: 2159
  visual_bert:
    cmd: "python -m hateful_memes.models.visual_bert --batch_size 16 --lr 1e-05 --epochs\
      \ 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_dir data/06_models/visual_bert\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/visual_bert.py
      md5: efbff69c281e0de05f3baf9adbd6c74d
      size: 8621
    - path: logs/test_visual_bert.log
      md5: 7e2915c02795dc86a612b872583546ee
      size: 997
    outs:
    - path: data/06_models/visual_bert
      md5: 6a97f9d1a1d45c1fe76c17a4d141fdb5.dir
      size: 1623290983
      nfiles: 1
  test_electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 4  --fast_dev_run\
      \ True --model_name 'google/electra-small-discriminator' --model_name_simple\
      \ 'Electra' | tee logs/test_electra.log 2>&1\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/auto_text_model.py
      md5: adbe7bb2b0235e65621231831eef5f19
      size: 5041
    outs:
    - path: logs/test_electra.log
      md5: cfa7bd28430ee0dcfdb76b1d27d75f0c
      size: 3594
  electra:
    cmd: "python -m hateful_memes.models.auto_text_model --batch_size 16 --lr 1e-05\
      \ --epochs 100 --max_length 512 --dense_dim 256 --dropout_rate 0.1 --gradient_clip_value\
      \ 1.0 --model_name 'google/electra-small-discriminator' --model_name_simple\
      \ 'Electra' --model_dir data/06_models/electra\n"
    deps:
    - path: data/01_raw/hateful_memes
      md5: edc9355e84fe557ba8b0f8efa4b15b91.dir
      size: 4232567214
      nfiles: 12148
    - path: hateful_memes/models/auto_text_model.py
      md5: adbe7bb2b0235e65621231831eef5f19
      size: 5041
    - path: logs/test_electra.log
      md5: cfa7bd28430ee0dcfdb76b1d27d75f0c
      size: 3594
    outs:
    - path: data/06_models/electra
      md5: f6968b097b3677adb57a99e3d9e9f625.dir
      size: 564665657
      nfiles: 1
